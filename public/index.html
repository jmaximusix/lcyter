<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="styles.css">
    <script type="module" defer src="/js/app.js"></script>
    <title>LCYTER</title>
</head>

<body class="bg-gray-900">
    <div id="example" class="flex justify-center text-center">
        <div class="md:w-3/5">
            <h1 class="text-4xl text-white font-bold my-4">Welcome To LCYTER</h1>
            <p class="text-2xl text-gray-300 mx-6 mt-10">Inspired by the <a class="text-blue-500 hover:text-blue-700"
                    href="https://en.wikipedia.org/wiki/Least_common_multiple">LCM</a> in
                math, the <strong class="font-extrabold text-white">Least Common YouTuber</strong> (LCYTER) is defined
                as
                the smallest YouTuber (by subscriber
                count) two
                people
                have in common (i.e. are both subscribed to)</p>
            <br>
            <div class="flex justify-center">
                <div v-if="hasValidToken()">
                    <button class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full mx-1"
                        @click="getSubscriptions()">Fetch subscription data!</button>
                </div>
                <div v-else>
                    <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full mx-1"
                        @click="oauthSignIn()">Authenticate now!</button>
                </div>
                <!-- <div v-if="Object.keys(my_subscriptions).length !== 0"> -->
                <div>
                    <button class="bg-teal-500 hover:bg-teal-700 text-white font-bold py-2 px-4 rounded-full mx-1"
                        @click="toggleShareModal()">Share Hashes</button>
                </div>
            </div>
            <div class="flex justify-center mt-10">
                <!-- <div class="flex flex-wrap justify-center max-w-screen-2xl"> -->
                <div class="flex-col max-w-screen-2xl">
                    <div v-for="youtuber in my_subscriptions"
                        class="bg-gray-800 hover:bg-gray-700 my-3 p-2 flex justify-between items-center rounded-3xl mx-2">
                        <div class="flex items-center">
                            <img :src="youtuber.thumbnail" class="rounded-full w-12" alt="Channel icon">
                            <span class="font-bold text-xl text-white ml-4">{{ youtuber.name }}</span>
                        </div>
                        <span class="text-gray-200 mx-3">{{ displaySubs(youtuber) }}</span>
                    </div>
                </div>
            </div>
        </div>
        <div v-if="getModal()">
            <div class="bg-black opacity-50 fixed inset-0" @click="toggleShareModal()"></div>
            <div
                class="bg-gray-800 rounded-2xl shadow-lg h-fit w-80 lg:w-1/3 fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-white">
                <h1 class="text-2xl font-bold my-4 text-teal-500">Share a hashed version of your subscriptions</h1>
                <p class="text-left mx-4">You can choose to either save your hashes as a txt file and share them
                    however you like or upload them to the server for convenient accessibility.<br>
                    If you choose to upload them, everyone can access them using the identifier. It's up to you whether
                    you want to use a randomized string that's hard to guess or a more memorable one.
                    The password is for updating your hashes later on. If you forget it, you can't use the same
                    identifier again.<br></p>
                <p class="font-light text-sm text-left mx-4 mt-2"><strong class="underline">Note:
                    </strong>The
                    data you share is only a list of the hashed channel
                    ids. For the simple scope of this
                    project, this means you can only see the YouTube channels you have in common. However, the data
                    isn't
                    "encrypted" in a meaningful way that would prevent anyone from comparing it to a list of
                    "guesses" and thereby checking if you subscribed to those channels.
                </p>
                <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full mx-1"
                    @click="downloadtxt()">Download TXT</button>
                <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full mx-1"
                    @click="toggleModalSign()">Download TXT</button>
            </div>
        </div>
    </div>
</body>

</html>